{
  "bot": {
    "name": "Alliance Bernstein",
    "description": "Alliance Bernstein Fund Bot",
    "interaction_timeout": 120,
    "admin_interaction_timeout": 10,
    "session_timeout": 0,
    "ga_id": "UA-46363590-11",
    "settings": {
      "get_start_button": {"message": {"text": "Hi"}},
      "persistent_menu": [
        {
          "type": "web_url",
          "title": "Compose.ai å®˜æ–¹ç¶²ç«™",
          "url": "http://compose.ai"
        }
      ]
    },
    "nodes": {
      "Start": {
        "name": "First time user",
        "description": "First time user",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.router.core.noop",
          "config": {
            "next_node_id": "RootRouter"
          }
        }
      },

      "Root": {
        "name": "Root",
        "description": "Root node, show usage",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "text": "å—¨ {{user.first_name}} ! â˜º"
              }
            ]
          }
        }
      },

      "RootRouter": {
        "name": "RootRouter",
        "description": "Root router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["2018OF"]
                },
                "end_node_id": "RootRouter",
                "ack_message": "æ­¡è¿åƒèˆ‡2018è¯åšå…¨çƒæŠ•è³‡è«–å£‡ï¼Œè«‹é»é¸æ­¤ç¶²å€ https://pigeonhole.at/2018OFï¼Œèˆ‡è¬›è€…é€²è¡Œå³æ™‚äº’å‹•"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["æ¸¬é©—çµæœèªªæ˜"],
                  "memory_set": [
                    {"key": "ajax_root", "value": "{{memory.ajax_root|unref('') if memory.ajax_root else 'http://dotted-lexicon-133523.appspot.com'}}"}
                  ]
                },
                "end_node_id": "GetReasons",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘", "æ±‚åŠ©"]
                },
                "end_node_id": "ShowHelp",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["æŸ¥è©¢(.+)", "æœå°‹(.+)", "é—œéµå­—(.+)"],
                  "collect_as": {"key": "FEATURE", "value": "KeywordQuery"},
                  "memory_set": [
                    {"key": "FEATURE", "value": "KeywordQuery"},
                    {"key": "keyword", "value": "{{matches#1}}"},
                    {"key": "ajax_root", "value": "{{memory.ajax_root|unref('') if memory.ajax_root else 'http://dotted-lexicon-133523.appspot.com'}}"}
                  ]
                },
                "end_node_id": "KeywordQuery",
                "ack_message": "ä½¿ç”¨é—œéµå­—æŸ¥è©¢ä¸­..."
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["æ¸¬é©—","æŠ•è³‡éˆæ„Ÿè£½é€ æ©Ÿ"]
                },
                "end_node_id": "StartGame",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["é–‹å§‹"],
                  "collect_as": {"key": "FEATURE", "value": "NoIdea"},
                  "memory_set": [
                    {"key": "FEATURE", "value": "NoIdea"},
                    {"key": "ajax_root", "value": "{{memory.ajax_root|unref('') if memory.ajax_root else 'http://dotted-lexicon-133523.appspot.com'}}"}
                  ]
                },
                "end_node_id": "RecommendFunds",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["ä¸æ»¿æ„"],
                  "collect_as": {"key": "FEATURE", "value": "Category"},
                  "memory_set": [
                    {"key": "FEATURE", "value": "Category"},
                    {"key": "ajax_root", "value": "{{memory.ajax_root|unref('') if memory.ajax_root else 'http://dotted-lexicon-133523.appspot.com'}}"}
                  ]
                },
                "end_node_id": "NotSatisfied",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["å‚µåˆ¸å‹", "è‚¡ç¥¨å‹", "å¤šå…ƒè³‡ç”¢"],
                  "collect_as": {"key": "FEATURE", "value": "ListCategory"},
                  "memory_set": [
                    {"key": "FEATURE", "value": "ListCategory"},
                    {"key": "category"},
                    {"key": "ajax_root", "value": "{{memory.ajax_root|unref('') if memory.ajax_root else 'http://dotted-lexicon-133523.appspot.com'}}"}
                  ]
                },
                "end_node_id": "ListCategory",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)prod"],
                  "memory_set": [
                    {"key": "ajax_root", "value": "http://dotted-lexicon-133523.appspot.com"}
                  ]
                },
                "end_node_id": "Root",
                "ack_message": "Switched to PROD: {{memory.ajax_root}}"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)dev"],
                  "memory_set": [
                    {"key": "ajax_root", "value": "http://localhost:8888"}
                  ]
                },
                "end_node_id": "Root",
                "ack_message": "Switched to DEV: {{memory.ajax_root}}"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["æ»¿æ„"]
                },
                "end_node_id": "Satisfy",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "sticker",
                  "params": [".*"]
                },
                "end_node_id": "StartGame",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["AB", "ab", "tttt"]
                },
                "end_node_id": "RootRouter",
                "ack_message": "è¬è¬æ‚¨çš„é—œæ³¨\nä»Šå¤©æƒ³äº†è§£ä½•ç¨®æŠ•è³‡è¨Šæ¯ï¼Ÿ\nè¼¸å…¥ä¸‹åˆ—æ•¸å­—ï¼Œä¸€ç§’ç«‹å³å›è¦† ô€‚ô€‡²pencilô¿¿ \n[1] å‚µåˆ¸\n[2] è‚¡ç¥¨\n[3] å¤šå…ƒè³‡ç”¢\n[4] é…æ¯è©¦ç®—\n[5] æŸ¥è©¢é…æ¯è³‡è¨Š\n[6] æŸ¥è©¢ä¼‘å¸‚æ—¥æœŸ\n[7] æŸ¥è©¢æœ€æ–°æ·¨å€¼"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["^1$", "bond"]
                },
                "end_node_id": "RootRouter",
                "ack_message": "é—œæ–¼å‚µåˆ¸ï¼Œæ‚¨æ‡‰è©²è¦çŸ¥é“çš„3ä»¶äº‹\n\nç«‹å³é»é–±ï¼Œè®“æ”¶ç›ŠæŠ•è³‡ç®¡å®¶ç‚ºæ‚¨è§£ç­” ô€‚ô€‡²pencilô¿¿\n\n+ æ·ºè«‡å‚µåˆ¸åŸºé‡‘ https://goo.gl/LKMaiC\n+ å‚µåˆ¸åŸºé‡‘èˆ‡é…æ¯ç‡ https://goo.gl/QmxuLx\n+ å‚µåˆ¸åŸºé‡‘ç¨®é¡èˆ‡é¢¨éšª https://goo.gl/f7QyVL\n\næƒ³å›ä¸Šä¸€é ï¼Œè«‹è¼¸å…¥AB  ô€„ƒô€„³okô¿¿"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["^2$"]
                },
                "end_node_id": "RootRouter",
                "ack_message": "é—œæ–¼è‚¡ç¥¨ï¼Œæ‚¨æ‡‰è©²è¦çŸ¥é“çš„3ä»¶äº‹\n\nç«‹å³é»é–±ï¼Œè®“æ”¶ç›ŠæŠ•è³‡ç®¡å®¶ç‚ºæ‚¨è§£ç­” ô€‚ô€‡²pencilô¿¿\n\n+ åƒè€ƒæŒ‡æ•¸å’Œå ±é…¬ç‡çš„é—œä¿‚ https://goo.gl/z108Br\n+ è‚¡åƒ¹æ€æ¨£çœ‹æ‰ç®—åˆç† https://goo.gl/3GxQ64\n+ è©•ä¼°ä¼æ¥­ç²åˆ©å¾ˆé‡è¦ https://goo.gl/stmzNy\n\næƒ³å›ä¸Šä¸€é ï¼Œè«‹è¼¸å…¥AB  ô€„ƒô€„³okô¿¿"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["^3$"]
                },
                "end_node_id": "RootRouter",
                "ack_message": "å¤šå…ƒè³‡ç”¢ä¹‹æ‰€ä»¥ç¨±åšã€Œå¤šå…ƒã€ï¼Œæ˜¯å› ç‚ºæŠ•è³‡ç¯„åœä¸åªæ˜¯è‚¡ç¥¨ã€å‚µåˆ¸ç­‰å‚³çµ±å–®ä¸€è³‡ç”¢ï¼Œæ›´æ¶µè“‹äº†å…¶ä»–è³‡ç”¢å’Œç­–ç•¥ï¼Œæ‰èƒ½å‰µé€ å‡ºå»£æ³›çš„æ”¶ç›Šä¾†æºã€‚\n\nçœ‹æ›´å¤šâ†˜https://goo.gl/xzEQZd\n\næƒ³å›ä¸Šä¸€é ï¼Œè«‹è¼¸å…¥AB  ô€„ƒô€„³okô¿¿"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["^4$"]
                },
                "end_node_id": "RootRouter",
                "ack_message": "æ‰‹æ©Ÿæ»‘ä¸€æ»‘ï¼Œç®—ç®—æ¯æœˆæœŸæœ›ç¾é‡‘æµ ô€„ƒô€„¹eighthnoteô¿¿\n\né¦¬ä¸Šç®—â†˜https://goo.gl/MHSkQD\n\næœ€æ–°é…æ¯è³‡è¨Š : https://goo.gl/Mi6UjP\n\næƒ³å›ä¸Šä¸€é ï¼Œè«‹è¼¸å…¥AB  ô€„ƒô€„³okô¿¿"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["^5$", "é…æ¯", "é…æ¯åŸºæº–æ—¥"]
                },
                "end_node_id": "Node5",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["^6$", "ä¼‘å¸‚æ—¥", "ä¼‘å¸‚æ—¥æœŸ"]
                },
                "end_node_id": "Node6",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["^7$", "æ·¨å€¼"]
                },
                "end_node_id": "RootRouter",
                "ack_message": "æœ€æ–°åŸºé‡‘æ·¨å€¼é¦¬ä¸Šçœ‹ :  https://goo.gl/eBke8o\n\næƒ³å›ä¸Šä¸€é ï¼Œè«‹è¼¸å…¥AB  ô€„ƒô€„³okô¿¿"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["^qr$"]
                },
                "end_node_id": "QRCode",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["é€€ä¼‘"]
                },
                "end_node_id": "Retire",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "OnError",
              "ack_message": ""
            }
          }
        }
      },

      "OnError": {
        "name": "OnError",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "text": "è¬è¬æ‚¨çš„ç•™è¨€! æ­¤ç‚ºè‡ªå‹•å›è¦†è¨Šæ¯ï¼Œæˆ‘å€‘ç„¡æ³•é€²è¡Œå€‹åˆ¥å°è«‡ ô€„ƒô€†moon winkô¿¿\næ­¡è¿æ‚¨è‡´é›»è¯åš (02)8758-3888 ô€‚ô€…‰smartphoneô¿¿ æœå‹™æ™‚é–“ï¼š09:00-18:00\n\næœ€æ–°æ·¨å€¼ https://goo.gl/eBke8o\nåŸºé‡‘é…æ¯ https://goo.gl/Cqn5Bl"
              },
              {
                "text": "æŠ•è³‡é€è¦– https://goo.gl/nqjQW1\nåŸºé‡‘ç¸¾æ•ˆ https://goo.gl/iI2pCN\nå½±éŸ³å°ˆå€ https://goo.gl/NiE0QS\næˆ‘çš„é—œæ³¨åŸºé‡‘ https://goo.gl/RQQ4ZC\n\næˆ–è¼¸å…¥ABï¼Œå¯äº†è§£æ›´å¤šæŠ•è³‡è¨Šæ¯å–”! ô€‚ô€‡²pencilô¿¿"
              }
            ]
          }
        }
      },

      "Retire": {
        "module": {
          "config": {
            "messages": [
              {
                "text": "é‚„åœ¨ç…©æƒ±å¹´é‡‘æ€éº¼è¨ˆç®—? å‹é€€å¤ ä¸å¤ é¤Šè€å—?\n\nè¯åšç”¨ä¸€å¼µåœ–ï¼Œè®“ä½ ç§’æ‡‚é€€ä¼‘é‡‘å¦‚ä½•è¦åŠƒ https://goo.gl/Vsxbrv"
              }
            ]
          },
          "id": "ai.compose.content.core.message"
        },
        "next_node_id": "RootRouter",
        "name": "Retire",
        "expect_input": false,
        "description": "Retire"
      },

      "Node5": {
        "name": "Node5",
        "expect_input": false,
        "description": "Node5",
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "imagemap",
                    "imagemap_url": "http://i.imgur.com/Ix9DAmk.jpg",
                    "actions": [
                      {
                        "type": "web_url",
                        "url": "https://www.abfunds.com.tw/apac/tw/mobile/funds/views/dividend.htm",
                        "area": {
                          "x": 0,
                          "y": 0,
                          "width": 1040,
                          "height": 1040
                        }
                      }
                    ]
                  }
                }
              },
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "imagemap",
                    "imagemap_url": "http://i.imgur.com/SN857px.jpg",
                    "actions": [
                      {
                        "type": "web_url",
                        "url": "https://www.abfunds.com.tw/apac/tw/mobile/funds/views/dividend.htm",
                        "area": {
                          "x": 0,
                          "y": 0,
                          "width": 1040,
                          "height": 1040
                        }
                      }
                    ]
                  }
                }
              },
              {
                "text": "è¯åšæœ€æ–°é…æ¯ç´€éŒ„ : https://goo.gl/Mi6UjP\n\næƒ³å›ä¸Šä¸€é ï¼Œè«‹è¼¸å…¥AB  ô€„ƒô€„³okô¿¿"
              }
            ]
          }
        }
      },

      "Node6": {
        "module": {
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "image",
                  "payload": {
                    "url": "http://i.imgur.com/yRLGU2j.jpg"
                  }
                }
              },
              {
                "attachment": {
                  "type": "image",
                  "payload": {
                    "url": "http://i.imgur.com/hvyQ8Jc.jpg"
                  }
                }
              }
            ]
          },
          "id": "ai.compose.content.core.message"
        },
        "next_node_id": "RootRouter",
        "name": "Node6",
        "expect_input": false,
        "description": "Node6"
      },

      "QRCode": {
        "module": {
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "image",
                  "payload": {
                    "url": "http://i.imgur.com/pDzDnUB.png"
                  }
                }
              }
            ]
          },
          "id": "ai.compose.content.core.message"
        },
        "next_node_id": "RootRouter",
        "name": "QRCode",
        "expect_input": false,
        "description": "QRCode"
      },

      "DoNothing": {
        "name": "DoNothing",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.noop",
          "config": {}
        }
      },

      "ShowHelp": {
        "name": "ShowHelp",
        "description": "Show help",
        "expect_input": false,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "text": "ã€Œæ¸¬é©—ã€å¯ä»¥æ‰¾åˆ°é©åˆä½ çš„æŠ•è³‡ç­–ç•¥ã€‚"
              },
              {
                "text": "ã€ŒæŸ¥è©¢+é—œéµå­—ã€å¯ä»¥æœå°‹åŸºé‡‘ã€‚ä¾‹å¦‚ï¼šã€ŒæŸ¥è©¢æ–°èˆˆå¸‚å ´ã€"
              }
            ]
          }
        }
      },

      "StartGame": {
        "name": "StartGame",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "text": "Hi {{user.first_name}} ! â˜º"
              },
              {
                "text": "æ¥ä¸‹ä¾†æ¸¬é©—ç´”å±¬è¶£å‘³ï¼Œä¸ä»£è¡¨ä»»ä½•æŠ•è³‡å»ºè­°ã€é¡§å•æˆ–éŠ·å”®ã€‚"
              },
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "æˆ‘å€‘æœƒå¾ä½ å–œä¸å–œæ­¡ä»¥ä¸‹5å€‹åäººï¼Œä¸¦ä¾æ“šä½ çš„å›ç­”æ¨æ¸¬ä½ å¯èƒ½æœƒå–œæ­¡çš„æŠ•è³‡ç­–ç•¥ï¼Œæº–å‚™å¥½é–‹å§‹äº†å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "é–‹å§‹æ¸¬é©—",
                        "payload": "é–‹å§‹"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },

      "RecommendFunds": {
        "name": "RecommendFunds",
        "description": "RecommendFunds",
        "expect_input": false,
        "next_node_id": "Questionaire0",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=NextFoodsToChoose",
            "params": [
              ["hl", "zh_TW"],
              ["input", "[]"],
              ["timezone", "{{user.timezone}}"],
              ["platform_user_ident", "{{user.platform_user_ident}}"]
            ],
            "transform": [
              {
                "type": "jinja",
                "template": [
                  "{",
                  "  \"memory\": {",
                  "    \"Questionaire0\": \"{{transform_input[0].food}}\",",
                  "    \"Questionaire1\": \"{{transform_input[1].food}}\",",
                  "    \"Questionaire2\": \"{{transform_input[2].food}}\",",
                  "    \"Questionaire3\": \"{{transform_input[3].food}}\",",
                  "    \"Questionaire4\": \"{{transform_input[4].food}}\"",
                  "  }",
                  "}"
                ]
              }
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚"
          }
        }
      },

      "Questionaire0": {
        "name": "Questionaire0",
        "description": "Questionaire0",
        "expect_input": false,
        "next_node_id": "Questionaire0Router",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "ä½ å–œæ­¡{{memory.Questionaire0}}å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      "Questionaire0Router": {
        "name": "Questionaire0Router",
        "description": "Questionaire0Router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯", "ä¸å–œ"],
                  "memory_set": [
                    {"key": "Answer0", "value": "-{{memory.Questionaire0}}"},
                    {"key": "Answers", "value": "-"}
                  ]
                },
                "ack_message": "",
                "end_node_id": "Questionaire1"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"],
                  "memory_set": [
                    {"key": "Answer0", "value": "+{{memory.Questionaire0}}"},
                    {"key": "Answers", "value": "+"}
                  ]
                },
                "ack_message": "",
                "end_node_id": "Questionaire1"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "Questionaire0",
              "ack_message": ""
            }
          }
        }
      },

      "Questionaire1": {
        "name": "Questionaire1",
        "description": "Questionaire1",
        "expect_input": false,
        "next_node_id": "Questionaire1Router",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "ä½ å–œæ­¡{{memory.Questionaire1}}å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      "Questionaire1Router": {
        "name": "Questionaire1Router",
        "description": "Questionaire1Router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯", "ä¸å–œ"],
                  "memory_set": [
                    {"key": "Answer1", "value": "-{{memory.Questionaire1}}"},
                    {"key": "Answers", "value": "{{memory.Answers}}-"}
                  ]
                },
                "ack_message": "",
                "end_node_id": "Questionaire2"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"],
                  "memory_set": [
                    {"key": "Answer1", "value": "+{{memory.Questionaire1}}"},
                    {"key": "Answers", "value": "{{memory.Answers}}+"}
                  ]
                },
                "ack_message": "",
                "end_node_id": "Questionaire2"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "Questionaire1",
              "ack_message": ""
            }
          }
        }
      },

      "Questionaire2": {
        "name": "Questionaire2",
        "description": "Questionaire2",
        "expect_input": false,
        "next_node_id": "Questionaire2Router",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "ä½ å–œæ­¡{{memory.Questionaire2}}å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      "Questionaire2Router": {
        "name": "Questionaire2Router",
        "description": "Questionaire2Router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯", "ä¸å–œ"],
                  "memory_set": [
                    {"key": "Answer2", "value": "-{{memory.Questionaire2}}"},
                    {"key": "Answers", "value": "{{memory.Answers}}-"}
                  ]
                },
                "ack_message": "",
                "end_node_id": "Questionaire3"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"],
                  "memory_set": [
                    {"key": "Answer2", "value": "+{{memory.Questionaire2}}"},
                    {"key": "Answers", "value": "{{memory.Answers}}+"}
                  ]
                },
                "ack_message": "",
                "end_node_id": "Questionaire3"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "Questionaire2",
              "ack_message": ""
            }
          }
        }
      },

      "Questionaire3": {
        "name": "Questionaire3",
        "description": "Questionaire3",
        "expect_input": false,
        "next_node_id": "Questionaire3Router",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "ä½ å–œæ­¡{{memory.Questionaire3}}å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      "Questionaire3Router": {
        "name": "Questionaire3Router",
        "description": "Questionaire3Router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯", "ä¸å–œ"],
                  "memory_set": [
                    {"key": "Answer3", "value": "-{{memory.Questionaire3}}"},
                    {"key": "Answers", "value": "{{memory.Answers}}-"}
                  ]
                },
                "ack_message": "",
                "end_node_id": "Questionaire4"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"],
                  "memory_set": [
                    {"key": "Answer3", "value": "+{{memory.Questionaire3}}"},
                    {"key": "Answers", "value": "{{memory.Answers}}+"}
                  ]
                },
                "ack_message": "",
                "end_node_id": "Questionaire4"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "Questionaire3",
              "ack_message": ""
            }
          }
        }
      },

      "Questionaire4": {
        "name": "Questionaire4",
        "description": "Questionaire4",
        "expect_input": false,
        "next_node_id": "Questionaire4Router",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "ä½ å–œæ­¡{{memory.Questionaire4}}å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      "Questionaire4Router": {
        "name": "Questionaire4Router",
        "description": "Questionaire4Router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯", "ä¸å–œ"],
                  "collect_as": {"key": "NoIdeaQuestionaires", "value": "[\"{{memory.Answer0}}\", \"{{memory.Answer1}}\", \"{{memory.Answer2}}\", \"{{memory.Answer3}}\", \"-{{memory.Questionaire4}}\"]"},
                  "memory_set": [
                    {"key": "Answer4", "value": "-{{memory.Questionaire4}}"},
                    {"key": "Answers", "value": "{{memory.Answers}}-"}
                  ]
                },
                "ack_message": "",
                "end_node_id": "UpdateDietHabit"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"],
                  "collect_as": {"key": "NoIdeaQuestionaires", "value": "[\"{{memory.Answer0}}\", \"{{memory.Answer1}}\", \"{{memory.Answer2}}\", \"{{memory.Answer3}}\", \"+{{memory.Questionaire4}}\"]"},
                  "memory_set": [
                    {"key": "Answer4", "value": "+{{memory.Questionaire4}}"},
                    {"key": "Answers", "value": "{{memory.Answers}}+"}
                  ]
                },
                "ack_message": "",
                "end_node_id": "UpdateDietHabit"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "Questionaire4",
              "ack_message": ""
            }
          }
        }
      },

      "UpdateDietHabit": {
        "name": "UpdateDietHabit",
        "description": "UpdateDietHabit",
        "expect_input": false,
        "next_node_id": "{{'ShowCategory' if memory.Answers == '-----' else 'GetPreference'}}",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=RecordSelectedFoods",
            "params": [
              ["user_lang", "zh_TW"],
              ["selected", "[\"{{memory.Answer0}}\", \"{{memory.Answer1}}\", \"{{memory.Answer2}}\", \"{{memory.Answer3}}\", \"{{memory.Answer4}}\"]"],
              ["platform_user_ident", "{{user.platform_user_ident}}"]
            ],
            "transform": [
              {
                "type": "jinja",
                "template": [
                  "{",
                  "}"
                ]
              }
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚ (Update)"
          }
        }
      },

      "GetPreference": {
        "name": "GetPreference",
        "description": "GetPreference",
        "expect_input": false,
        "next_node_id": "ComposeAiGetRecommendedFoods",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=GetPreference",
            "params": [
              ["platform_user_ident", "{{user.platform_user_ident}}"],
              ["timezone", "{{user.timezone}}"]
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚(GetPreference)"
          }
        }
      },

      "ComposeAiGetRecommendedFoods": {
        "name": "ComposeAiGetRecommendedFoods",
        "description": "ComposeAiGetRecommendedFoods",
        "expect_input": false,
        "next_node_id": "ComposeAiGetRecommendedFoodsNext",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=GetRecommendedFoods",
            "params": [
              ["user_lang", "zh_TW"],
              ["selected", "[\"{{memory.Answer0}}\", \"{{memory.Answer1}}\", \"{{memory.Answer2}}\", \"{{memory.Answer3}}\", \"{{memory.Answer4}}\"]"]
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚"
          }
        }
      },

      "GetReasons": {
        "name": "GetReasons",
        "description": "GetReasons",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=GetReasons",
            "params": [
              ["user_lang", "zh_TW"],
              ["selected", "[\"{{memory.Answer0}}\", \"{{memory.Answer1}}\", \"{{memory.Answer2}}\", \"{{memory.Answer3}}\", \"{{memory.Answer4}}\"]"]
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚(GetReasons)"
          }
        }
      },

      "ComposeAiGetRecommendedFoodsNext": {
        "name": "ComposeAiGetRecommendedFoodsNext",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "æ»¿æ„é€™å€‹æ¸¬é©—çµæœå—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "æ»¿æ„",
                        "payload": "æ»¿æ„"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸æ»¿æ„",
                        "payload": "ä¸æ»¿æ„"
                      },
                      {
                        "type": "postback",
                        "title": "æ¸¬é©—çµæœèªªæ˜",
                        "payload": "æ¸¬é©—çµæœèªªæ˜"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },

      "KeywordQuery": {
        "name": "KeywordQuery",
        "description": "KeywordQuery",
        "expect_input": false,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=KeywordQuery",
            "params": [
              ["user_lang", "zh_TW"],
              ["keyword", "{{memory.keyword}}"]
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚"
          }
        }
      },

      "NotSatisfied": {
        "name": "NotSatisfied",
        "description": "NotSatisfied",
        "expect_input": false,
        "next_node_id": "ShowCategory",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "text": "{{user.first_name}} æˆ‘æ¬£è³ä½ å°æŠ•è³‡å¾ˆæœ‰æƒ³æ³•!"
              },
              {
                "text": "ğŸ‘ "
              }
            ]
          }
        }
      },

      "ShowCategory": {
        "name": "ShowCategory",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "è«‹å•ä½ å–œæ­¡å“ªä¸€é¡å‹çš„æŠ•è³‡ç­–ç•¥å‘¢ï¼Ÿ",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "è‚¡ç¥¨å‹",
                        "payload": "è‚¡ç¥¨å‹"
                      },
                      {
                        "type": "postback",
                        "title": "å‚µåˆ¸å‹",
                        "payload": "å‚µåˆ¸å‹"
                      },
                      {
                        "type": "postback",
                        "title": "å¤šå…ƒè³‡ç”¢",
                        "payload": "å¤šå…ƒè³‡ç”¢"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },

      "ListCategory": {
        "name": "ListCategory",
        "description": "ListCategory",
        "expect_input": false,
        "next_node_id": "ListCategoryGoodOrNot",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=ListCategory",
            "params": [
              ["category", "{{memory.category}}"]
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚(ListCategory)"
          }
        }
      },

      "ListCategoryGoodOrNot": {
        "name": "ListCategoryGoodOrNot",
        "expect_input": false,
        "next_node_id": "ListCategoryGoodOrNotRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "å–œæ­¡é€™äº›æŠ•è³‡ç­–ç•¥å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },

      "ListCategoryGoodOrNotRouter": {
        "name": "ListCategoryGoodOrNotRouter",
        "description": "ListCategoryGoodOrNotRouter",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯", "ä¸å–œ"]
                },
                "ack_message": "",
                "end_node_id": "ShowCategory"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"]
                },
                "end_node_id": "Satisfy",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "ListCategoryGoodOrNot",
              "ack_message": ""
            }
          }
        }
      },

      "Satisfy": {
        "name": "Satisfy",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": {
              "Facebook": [
                {
                  "text": "è¬è¬ä½ "
                },
                {
                  "text": "ğŸ˜œ       "
                },
                {
                  "attachment": {
                    "type": "template",
                    "payload": {
                      "template_type": "generic",
                      "elements": [
                        {
                          "title": "æˆ–è¨±ä½ çš„å¥½å‹ä¹Ÿæœƒæƒ³ç©ç©çœ‹ï¼Œæ¥ä¸‹ä¾†é•·æŒ‰ä¸‹é¢é€™å‰‡è¨Šæ¯ â†“â†“ï¼Œé¸æ“‡é¸å–®ä¸­çš„ã€Œè½‰å‚³ã€ï¼Œå°±å¯ä»¥åˆ†äº«çµ¦ä½ çš„å¥½æœ‹å‹å–” :D",
                          "buttons": [
                            {
                              "type": "element_share"
                            }
                          ]
                        }
                      ]
                    }
                  }
                },
                {
                  "text": "æ¨è–¦ä½ ç©ç©ã€ŒæŠ•è³‡éˆæ„Ÿè£½é€ æ©Ÿ ã€ï¼Œå…ˆæŒ‰æ­¤é€£çµèˆ‡æˆ‘æˆç‚ºLINE å¥½å‹å§~ã€Œhttps://line.me/R/ti/p/%40gpt0697pã€"
                },
                {
                  "attachment": {
                    "type": "template",
                    "payload": {
                      "template_type": "button",
                      "text": "æƒ³å†ç©ä¸€æ¬¡å—ï¼Ÿ",
                      "buttons": [
                        {
                          "type": "postback",
                          "title": "æ˜¯",
                          "payload": "æ¸¬é©—"
                        }
                      ]
                    }
                  }
                }
              ],
              "Line": [
                {
                  "text": "è¬è¬ä½ "
                },
                {
                  "text": "ğŸ˜œ       "
                },
                {
                  "text": "æˆ–è¨±ä½ çš„å¥½å‹ä¹Ÿæœƒæƒ³ç©ç©çœ‹ï¼Œæ¥ä¸‹ä¾†é•·æŒ‰ä¸‹é¢é€™å‰‡è¨Šæ¯ â†“â†“ï¼Œé¸æ“‡é¸å–®ä¸­çš„ã€Œè½‰å‚³ã€ï¼Œå°±å¯ä»¥åˆ†äº«çµ¦ä½ çš„å¥½æœ‹å‹å–” :D"
                },
                {
                  "text": "æ¨è–¦ä½ ç©ç©ã€ŒæŠ•è³‡éˆæ„Ÿè£½é€ æ©Ÿ ã€ï¼Œå…ˆæŒ‰æ­¤é€£çµèˆ‡æˆ‘æˆç‚ºLINE å¥½å‹å§~ã€Œhttps://line.me/R/ti/p/%40gpt0697pã€"
                },
                {
                  "attachment": {
                    "type": "template",
                    "payload": {
                      "template_type": "button",
                      "text": "æƒ³å†ç©ä¸€æ¬¡å—ï¼Ÿ",
                      "buttons": [
                        {
                          "type": "postback",
                          "title": "æ˜¯",
                          "payload": "æ¸¬é©—"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          }
        }
      }
    }
  }
}
