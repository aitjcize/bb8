{
  "bot": {
    "name": "Alliance Bernstein",
    "description": "Alliance Bernstein Fund Bot",
    "interaction_timeout": 120,
    "admin_interaction_timeout": 10,
    "session_timeout": 0,
    "ga_id": "UA-58904642-2",
    "settings": {
      "get_start_button": {"message": {"text": "Hi"}},
      "persistent_menu": [
        {
          "type": "web_url",
          "title": "Compose.ai å®˜æ–¹ç¶²ç«™",
          "url": "http://compose.ai"
        }
      ]
    },
    "nodes": {
      "Start": {
        "name": "First time user",
        "description": "First time user",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "text": "å—¨ {{user.first_name}} ! â˜º"
              },
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "é€™å€‹éŠæˆ²éå¸¸ç°¡å–®ï¼Œæ¥ä¸‹ä¾†æˆ‘æœƒå•ä½ å–œä¸å–œæ­¡ä»¥ä¸‹äº”å€‹åäººï¼Œä¸¦ä¾æ“šä½ çš„å›ç­”åˆ¤æ–·ä½ å¯èƒ½æœƒå–œæ­¡çš„åŸºé‡‘ï¼Œæº–å‚™å¥½é–‹å§‹äº†å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "é–‹å§‹æ¸¬é©—",
                        "payload": "æ¸¬é©—"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },

      "Root": {
        "name": "Root",
        "description": "Root node, show usage",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "text": "å—¨ {{user.first_name}} ! â˜º"
              },
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "æ¥ä¸‹ä¾†æˆ‘æœƒå•ä½ å–œä¸å–œæ­¡ä»¥ä¸‹äº”å€‹åäººï¼Œä¸¦ä¾æ“šä½ çš„å›ç­”åˆ¤æ–·ä½ å¯èƒ½æœƒå–œæ­¡çš„åŸºé‡‘ï¼Œæº–å‚™å¥½é–‹å§‹äº†å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "é–‹å§‹æ¸¬é©—",
                        "payload": "æ¸¬é©—"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },

      "RootRouter": {
        "name": "RootRouter",
        "description": "Root router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["æ¸¬é©—çµæœèªªæ˜"],
                  "memory_set": [
                    {"key": "ajax_root", "value": "{{memory.ajax_root|unref('') if memory.ajax_root else 'http://dotted-lexicon-133523.appspot.com'}}"}
                  ]
                },
                "end_node_id": "GetReasons",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘", "æ±‚åŠ©"]
                },
                "end_node_id": "ShowHelp",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["æŸ¥è©¢(.+)", "æœå°‹(.+)", "é—œéµå­—(.+)"],
                  "collect_as": {"key": "FEATURE", "value": "KeywordQuery"},
                  "memory_set": [
                    {"key": "FEATURE", "value": "KeywordQuery"},
                    {"key": "keyword", "value": "{{matches#1}}"},
                    {"key": "ajax_root", "value": "{{memory.ajax_root|unref('') if memory.ajax_root else 'http://dotted-lexicon-133523.appspot.com'}}"}
                  ]
                },
                "end_node_id": "KeywordQuery",
                "ack_message": "ä½¿ç”¨é—œéµå­—æŸ¥è©¢ä¸­..."
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["æ¸¬é©—"],
                  "collect_as": {"key": "FEATURE", "value": "NoIdea"},
                  "memory_set": [
                    {"key": "FEATURE", "value": "NoIdea"},
                    {"key": "ajax_root", "value": "{{memory.ajax_root|unref('') if memory.ajax_root else 'http://dotted-lexicon-133523.appspot.com'}}"}
                  ]
                },
                "end_node_id": "RecommendFunds",
                "ack_message": "æ¸¬é©—é–‹å§‹å›‰!"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["ä¸æ»¿æ„"],
                  "collect_as": {"key": "FEATURE", "value": "Category"},
                  "memory_set": [
                    {"key": "FEATURE", "value": "Category"},
                    {"key": "ajax_root", "value": "{{memory.ajax_root|unref('') if memory.ajax_root else 'http://dotted-lexicon-133523.appspot.com'}}"}
                  ]
                },
                "end_node_id": "ShowCategory",
                "ack_message": "æˆ‘æ¬£è³ä½ å°æŠ•è³‡å¾ˆæœ‰æƒ³æ³•! ğŸ‘ "
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["å‚µåˆ¸å‹", "è‚¡ç¥¨å‹", "å¹³è¡¡å‹"],
                  "collect_as": {"key": "FEATURE", "value": "ListCategory"},
                  "memory_set": [
                    {"key": "FEATURE", "value": "ListCategory"},
                    {"key": "category"},
                    {"key": "ajax_root", "value": "{{memory.ajax_root|unref('') if memory.ajax_root else 'http://dotted-lexicon-133523.appspot.com'}}"}
                  ]
                },
                "end_node_id": "ListCategory",
                "ack_message": "æˆ‘æ¬£è³ä½ å°æŠ•è³‡å¾ˆæœ‰æƒ³æ³•! ğŸ‘ "
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)prod"],
                  "memory_set": [
                    {"key": "ajax_root", "value": "http://dotted-lexicon-133523.appspot.com"}
                  ]
                },
                "end_node_id": "Root",
                "ack_message": "Switched to PROD: {{memory.ajax_root}}"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)dev"],
                  "memory_set": [
                    {"key": "ajax_root", "value": "http://localhost:8888"}
                  ]
                },
                "end_node_id": "Root",
                "ack_message": "Switched to DEV: {{memory.ajax_root}}"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["æ»¿æ„"]
                },
                "end_node_id": "Satisfy",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "Root",
              "ack_message": ""
            }
          }
        }
      },

      "ShowHelp": {
        "name": "ShowHelp",
        "description": "Show help",
        "expect_input": false,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "text": "ã€Œæ¸¬é©—ã€å¯ä»¥æ‰¾åˆ°é©åˆä½ çš„åŸºé‡‘ã€‚"
              },
              {
                "text": "ã€ŒæŸ¥è©¢+é—œéµå­—ã€å¯ä»¥æœå°‹åŸºé‡‘ã€‚ä¾‹å¦‚ï¼šã€ŒæŸ¥è©¢æ–°èˆˆå¸‚å ´ã€"
              }
            ]
          }
        }
      },

      "RecommendFunds": {
        "name": "RecommendFunds",
        "description": "RecommendFunds",
        "expect_input": false,
        "next_node_id": "Questionaire0",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=NextFoodsToChoose",
            "params": [
              ["hl", "zh_TW"],
              ["input", "[]"],
              ["timezone", "{{user.timezone}}"],
              ["platform_user_ident", "{{user.platform_user_ident}}"]
            ],
            "transform": [
              {
                "type": "jinja",
                "template": [
                  "{",
                  "  \"memory\": {",
                  "    \"Questionaire0\": \"{{transform_input[0].food}}\",",
                  "    \"Questionaire1\": \"{{transform_input[1].food}}\",",
                  "    \"Questionaire2\": \"{{transform_input[2].food}}\",",
                  "    \"Questionaire3\": \"{{transform_input[3].food}}\",",
                  "    \"Questionaire4\": \"{{transform_input[4].food}}\"",
                  "  }",
                  "}"
                ]
              }
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚"
          }
        }
      },

      "Questionaire0": {
        "name": "Questionaire0",
        "description": "Questionaire0",
        "expect_input": false,
        "next_node_id": "Questionaire0Router",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "ä½ å–œæ­¡{{memory.Questionaire0}}å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      "Questionaire0Router": {
        "name": "Questionaire0Router",
        "description": "Questionaire0Router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯"],
                  "memory_set": {"key": "Answer0", "value": "-{{memory.Questionaire0}}"}
                },
                "ack_message": "",
                "end_node_id": "Questionaire1"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"],
                  "memory_set": {"key": "Answer0", "value": "+{{memory.Questionaire0}}"}
                },
                "ack_message": "",
                "end_node_id": "Questionaire1"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "Questionaire0",
              "ack_message": ""
            }
          }
        }
      },

      "Questionaire1": {
        "name": "Questionaire1",
        "description": "Questionaire1",
        "expect_input": false,
        "next_node_id": "Questionaire1Router",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "ä½ å–œæ­¡{{memory.Questionaire1}}å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      "Questionaire1Router": {
        "name": "Questionaire1Router",
        "description": "Questionaire1Router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯"],
                  "memory_set": {"key": "Answer1", "value": "-{{memory.Questionaire1}}"}
                },
                "ack_message": "",
                "end_node_id": "Questionaire2"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"],
                  "memory_set": {"key": "Answer1", "value": "+{{memory.Questionaire1}}"}
                },
                "ack_message": "",
                "end_node_id": "Questionaire2"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "Questionaire1",
              "ack_message": ""
            }
          }
        }
      },

      "Questionaire2": {
        "name": "Questionaire2",
        "description": "Questionaire2",
        "expect_input": false,
        "next_node_id": "Questionaire2Router",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "ä½ å–œæ­¡{{memory.Questionaire2}}å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      "Questionaire2Router": {
        "name": "Questionaire2Router",
        "description": "Questionaire2Router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯"],
                  "memory_set": {"key": "Answer2", "value": "-{{memory.Questionaire2}}"}
                },
                "ack_message": "",
                "end_node_id": "Questionaire3"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"],
                  "memory_set": {"key": "Answer2", "value": "+{{memory.Questionaire2}}"}
                },
                "ack_message": "",
                "end_node_id": "Questionaire3"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "Questionaire2",
              "ack_message": ""
            }
          }
        }
      },

      "Questionaire3": {
        "name": "Questionaire3",
        "description": "Questionaire3",
        "expect_input": false,
        "next_node_id": "Questionaire3Router",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "ä½ å–œæ­¡{{memory.Questionaire3}}å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      "Questionaire3Router": {
        "name": "Questionaire3Router",
        "description": "Questionaire3Router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯"],
                  "memory_set": {"key": "Answer3", "value": "-{{memory.Questionaire3}}"}
                },
                "ack_message": "",
                "end_node_id": "Questionaire4"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"],
                  "memory_set": {"key": "Answer3", "value": "+{{memory.Questionaire3}}"}
                },
                "ack_message": "",
                "end_node_id": "Questionaire4"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "Questionaire3",
              "ack_message": ""
            }
          }
        }
      },

      "Questionaire4": {
        "name": "Questionaire4",
        "description": "Questionaire4",
        "expect_input": false,
        "next_node_id": "Questionaire4Router",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "ä½ å–œæ­¡{{memory.Questionaire4}}å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      "Questionaire4Router": {
        "name": "Questionaire4Router",
        "description": "Questionaire4Router",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯"],
                  "collect_as": {"key": "NoIdeaQuestionaires", "value": "[\"{{memory.Answer0}}\", \"{{memory.Answer1}}\", \"{{memory.Answer2}}\", \"{{memory.Answer3}}\", \"-{{memory.Questionaire4}}\"]"},
                  "memory_set": {"key": "Answer4", "value": "-{{memory.Questionaire4}}"}
                },
                "ack_message": "",
                "end_node_id": "UpdateDietHabit"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"],
                  "collect_as": {"key": "NoIdeaQuestionaires", "value": "[\"{{memory.Answer0}}\", \"{{memory.Answer1}}\", \"{{memory.Answer2}}\", \"{{memory.Answer3}}\", \"+{{memory.Questionaire4}}\"]"},
                  "memory_set": {"key": "Answer4", "value": "+{{memory.Questionaire4}}"}
                },
                "ack_message": "",
                "end_node_id": "UpdateDietHabit"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "Questionaire4",
              "ack_message": ""
            }
          }
        }
      },

      "UpdateDietHabit": {
        "name": "UpdateDietHabit",
        "description": "UpdateDietHabit",
        "expect_input": false,
        "next_node_id": "GetPreference",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=RecordSelectedFoods",
            "params": [
              ["user_lang", "zh_TW"],
              ["selected", "[\"{{memory.Answer0}}\", \"{{memory.Answer1}}\", \"{{memory.Answer2}}\", \"{{memory.Answer3}}\", \"{{memory.Answer4}}\"]"],
              ["platform_user_ident", "{{user.platform_user_ident}}"]
            ],
            "transform": [
              {
                "type": "jinja",
                "template": [
                  "{",
                  "}"
                ]
              }
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚ (Update)"
          }
        }
      },

      "GetPreference": {
        "name": "GetPreference",
        "description": "GetPreference",
        "expect_input": false,
        "next_node_id": "ComposeAiGetRecommendedFoods",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=GetPreference",
            "params": [
              ["platform_user_ident", "{{user.platform_user_ident}}"],
              ["timezone", "{{user.timezone}}"]
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚(GetPreference)"
          }
        }
      },

      "ComposeAiGetRecommendedFoods": {
        "name": "ComposeAiGetRecommendedFoods",
        "description": "ComposeAiGetRecommendedFoods",
        "expect_input": false,
        "next_node_id": "ComposeAiGetRecommendedFoodsNext",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=GetRecommendedFoods",
            "params": [
              ["user_lang", "zh_TW"],
              ["selected", "[\"{{memory.Answer0}}\", \"{{memory.Answer1}}\", \"{{memory.Answer2}}\", \"{{memory.Answer3}}\", \"{{memory.Answer4}}\"]"]
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚"
          }
        }
      },

      "GetReasons": {
        "name": "GetReasons",
        "description": "GetReasons",
        "expect_input": false,
        "next_node_id": "ComposeAiGetRecommendedFoodsNext",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=GetReasons",
            "params": [
              ["user_lang", "zh_TW"],
              ["selected", "[\"{{memory.Answer0}}\", \"{{memory.Answer1}}\", \"{{memory.Answer2}}\", \"{{memory.Answer3}}\", \"{{memory.Answer4}}\"]"]
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚(GetReasons)"
          }
        }
      },

      "ComposeAiGetRecommendedFoodsNext": {
        "name": "ComposeAiGetRecommendedFoodsNext",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "æ»¿æ„é€™å€‹æ¸¬é©—çµæœå—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "æ»¿æ„",
                        "payload": "æ»¿æ„"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸æ»¿æ„",
                        "payload": "ä¸æ»¿æ„"
                      },
                      {
                        "type": "postback",
                        "title": "æ¸¬é©—çµæœèªªæ˜",
                        "payload": "æ¸¬é©—çµæœèªªæ˜"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },

      "KeywordQuery": {
        "name": "KeywordQuery",
        "description": "KeywordQuery",
        "expect_input": false,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=KeywordQuery",
            "params": [
              ["user_lang", "zh_TW"],
              ["keyword", "{{memory.keyword}}"]
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚"
          }
        }
      },

      "ShowCategory": {
        "name": "ShowCategory",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "è«‹å•ä½ å–œæ­¡å“ªä¸€é¡å‹çš„åŸºé‡‘å‘¢ï¼Ÿ",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "è‚¡ç¥¨å‹",
                        "payload": "è‚¡ç¥¨å‹"
                      },
                      {
                        "type": "postback",
                        "title": "å‚µåˆ¸å‹",
                        "payload": "å‚µåˆ¸å‹"
                      },
                      {
                        "type": "postback",
                        "title": "å¹³è¡¡å‹",
                        "payload": "å¹³è¡¡å‹"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },

      "ListCategory": {
        "name": "ListCategory",
        "description": "ListCategory",
        "expect_input": false,
        "next_node_id": "ListCategoryGoodOrNot",
        "module": {
          "id": "ai.compose.content.core.commando",
          "config": {
            "url": "{{memory.ajax_root}}/want_ajax?action=ListCategory",
            "params": [
              ["category", "{{memory.category}}"]
            ],
            "debug": false,
            "on_error": "æˆ‘å¥½åƒå£æ‰äº†ï¼Œå¿«é€šçŸ¥ç®¡ç†å“¡ã€‚(ListCategory)"
          }
        }
      },

      "ListCategoryGoodOrNot": {
        "name": "ListCategoryGoodOrNot",
        "expect_input": false,
        "next_node_id": "ListCategoryGoodOrNotRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": [
              {
                "attachment": {
                  "type": "template",
                  "payload": {
                    "template_type": "button",
                    "text": "å–œæ­¡é€™äº›åŸºé‡‘å—?",
                    "buttons": [
                      {
                        "type": "postback",
                        "title": "å–œæ­¡",
                        "payload": "å–œæ­¡"
                      },
                      {
                        "type": "postback",
                        "title": "ä¸å–œæ­¡",
                        "payload": "ä¸å–œæ­¡"
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },

      "ListCategoryGoodOrNotRouter": {
        "name": "ListCategoryGoodOrNotRouter",
        "description": "ListCategoryGoodOrNotRouter",
        "expect_input": true,
        "next_node_id": "Root",
        "module": {
          "id": "ai.compose.router.core.default",
          "config": {
            "links": [
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(ä½¿ç”¨)?èªªæ˜", "tutorial", "^\\?", "(?i)help", "å¹«åŠ©", "æ€éº¼ç”¨?", "^ï¼Ÿ", "ä¸æœƒç”¨", "æ±‚æ•‘"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(no)", "ä¸å¥½", "ä¸å–œæ­¡", "ä¸æ˜¯"]
                },
                "ack_message": "",
                "end_node_id": "ShowCategory"
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(yes|ok)", "å¥½", "å–œæ­¡", "æ˜¯"]
                },
                "end_node_id": "Satisfy",
                "ack_message": "è¬è¬ä½ çš„æ”¯æŒ! ä½ å¯ä»¥é€éè¼¸å…¥ã€Œæ¸¬é©—ã€å†ç©ä¸€æ¬¡å–”! "
              },
              {
                "rule": {
                  "type": "regexp",
                  "params": ["(?i)(hi|hello)", "ä½ å¥½", "ä¸»é¸å–®", "å“ˆå›‰"]
                },
                "end_node_id": "Root",
                "ack_message": ""
              }
            ],
            "on_error": {
              "end_node_id": "ListCategoryGoodOrNot",
              "ack_message": ""
            }
          }
        }
      },

      "Satisfy": {
        "name": "Satisfy",
        "expect_input": false,
        "next_node_id": "RootRouter",
        "module": {
          "id": "ai.compose.content.core.message",
          "config": {
            "messages": {
              "Facebook": [
                {
                  "text": "è¬è¬ä½ çš„å–œæ„› :D"
                },
                {
                  "attachment": {
                    "type": "template",
                    "payload": {
                      "template_type": "generic",
                      "elements": [
                        {
                          "title": "æˆ–è¨±ä½ çš„å¥½å‹ä¹Ÿæœƒæƒ³ç©ç©çœ‹",
                          "buttons": [
                            {
                              "type": "element_share"
                            }
                          ]
                        }
                      ]
                    }
                  }
                }
              ],
              "Line": [
                {
                  "text": "è¬è¬ä½ çš„å–œæ„› :D"
                },
                {
                  "text": "æˆ–è¨±ä½ çš„å¥½å‹ä¹Ÿæœƒæƒ³ç©ç©çœ‹ï¼ŒæŠŠé€™å€‹é€£çµå‚³çµ¦ä»–å€‘å°±å¯ä»¥å›‰:ã€Œhttp://line.me/ti/p/%40tlg8995gã€"
                }
              ]
            }
          }
        }
      }
    }
  }
}
